var cartaTronquilho = {
  nome: "Tronquilho",
  imagem:
    "http://pm1.narvii.com/6976/2694b112f9d3905e8c3b8d7c0fee0ee6be84aae0r1-612-380v2_uhq.jpg",
  atributos: {
    ataque: 15,
    defesa: 20,
    magia: 20,
    carisma: 50
  }
};

var cartaFwooper = {
  nome: "Fwooper",
  imagem:
    "https://i.pinimg.com/originals/16/9d/31/169d317be408e6618bead2c01fbf8a9f.jpg",
  atributos: {
    ataque: 50,
    defesa: 40,
    magia: 60,
    carisma: 50
  }
};

var cartaGraphorn = {
  nome: "Graphorn",
  imagem:
    "https://c.files.bbci.co.uk/1C9E/production/_115062370_177fgraphorn-credit-photo-courtesy-of-warner-bros.-pictures.jpg",
  atributos: {
    ataque: 80,
    defesa: 65,
    magia: 30,
    carisma: 5
  }
};

var cartaKappa = {
  nome: "Kappa",
  imagem:
    "https://i.pinimg.com/236x/3f/65/25/3f65252368c091cf25777ef09fa6221a.jpg",
  atributos: {
    ataque: 40,
    defesa: 30,
    magia: 45,
    carisma: 10
  }
};

var cartaMooncalf = {
  nome: "Mooncalf",
  imagem:
    "https://i.pinimg.com/236x/dd/4f/13/dd4f132be99ed17d0d99ac72a6349d7f.jpg",
  atributos: {
    ataque: 10,
    defesa: 10,
    magia: 20,
    carisma: 60
  }
};

var cartaLethifold = {
  nome: "Lethifold",
  imagem:
    "https://wizardsunitehub.info/wp-content/uploads/2019/04/ui_registry_family10_pg05_sticker02_returned-292x300.png",
  atributos: {
    ataque: 70,
    defesa: 60,
    magia: 50,
    carisma: 0
  }
};

var cartaMurtlap = {
  nome: "Murtlap",
  imagem:
    "https://i.pinimg.com/564x/d0/69/d4/d069d4eb2a1834ef16a5f671b4f96712.jpg",
  atributos: {
    ataque: 20,
    defesa: 30,
    magia: 40,
    carisma: 10
  }
};

var cartaPelucio = {
  nome: "Pelúcio",
  imagem: "https://uploads.jovemnerd.com.br/wp-content/uploads/2018/08/niffler-1210x544.jpg",
  atributos: {
    ataque: 10,
    defesa: 30,
    magia: 40,
    carisma: 80
  }
};

var cartaNundu = {
  nome: "Nundu",
  imagem:
    "https://i.pinimg.com/236x/e1/05/f5/e105f5d6c0cfe518fd1642eec7f621c1.jpg",
  atributos: {
    ataque: 80,
    defesa: 70,
    magia: 60,
    carisma: 5
  }
};

var cartaOccamy = {
  nome: "Occamy",
  imagem:
    "https://i.pinimg.com/736x/81/45/73/814573f5d99776ff7714d9f49d9c88dd.jpg",
  atributos: {
    ataque: 50,
    defesa: 45,
    magia: 70,
    carisma: 60
  }
};

var cartaRunespoor = {
  nome: "Runespoor",
  imagem:
    "https://i.pinimg.com/originals/de/fa/03/defa03c3126b210480cf72fecce6e5d1.png",
  atributos: {
    ataque: 80,
    defesa: 75,
    magia: 60,
    carisma: 0
  }
};

var cartaRapinomonio = {
  nome: "Rapinomonio",
  imagem:
    "https://i.pinimg.com/736x/f0/f8/70/f0f870466e43702a7e88732334562116.jpg",
  atributos: {
    ataque: 60,
    defesa: 50,
    magia: 20,
    carisma: 10
  }
};

var cartaSeminviso = {
  nome: "Seminviso",
  imagem:
    "http://pm1.narvii.com/6893/215f4bd17af96105ce9526075ede6470627825f5r1-841-853v2_uhq.jpg",
  atributos: {
    ataque: 30,
    defesa: 60,
    magia: 60,
    carisma: 50
  }
};

var cartaMandragora = {
  nome: "Mandrágora",
  imagem:
    "https://i.pinimg.com/originals/2b/fd/c0/2bfdc05ac63359a17d934754b811b00f.jpg",
  atributos: {
    ataque: 30,
    defesa: 40,
    magia: 30,
    carisma: 10
  }
};

var cartaFenix = {
  nome: "Fênix",
  imagem:
    "https://i.pinimg.com/originals/72/aa/84/72aa842cfc6164a393d2f92f3a09fba7.jpg",
  atributos: {
    ataque: 60,
    defesa: 50,
    magia: 70,
    carisma: 60
  }
};

var cartaBasilisco = {
  nome: "Basilisco",
  imagem:
    "https://seenonceleb.com/wp-content/uploads/2019/06/the-reptile-gigantic-Basilisk-in-Harry-Potter-and-the-chamber-of-secrets-Movie.jpg",
  atributos: {
    ataque: 80,
    defesa: 70,
    magia: 10,
    carisma: 0
  }
};

var cartaDiabretes = {
  nome: "Diabretes da Cornualha",
  imagem:
    "http://auladedcatdehogwarts.weebly.com/uploads/1/0/2/4/10242472/1913150.jpg",
  atributos: {
    ataque: 30,
    defesa: 20,
    magia: 15,
    carisma: 30
  }
};

var cartaNegroDasIlhasHebridas = {
  nome: "Dragão - Negro das Ilhas Hébridas",
  imagem:
    "https://pm1.narvii.com/6360/5f1afbae982eff8d86593f081655b1219c4f3c28_hq.jpg",
  atributos: {
    ataque: 85,
    defesa: 70,
    magia: 60,
    carisma: 0
  }
};

var cartaMeteoroChines = {
  nome: "Dragão - Meteoro Chinês",
  imagem:
    "https://d.wattpad.com/story_parts/658272090/images/156d56f0c2bf04d8502346116023.jpg",
  atributos: {
    ataque: 80,
    defesa: 70,
    magia: 60,
    carisma: 0
  }
};

var cartaRaboCorneo = {
  nome: "Dragão - Rabo-Córneo Hungáro",
  imagem:
    "https://i.pinimg.com/600x315/c8/aa/55/c8aa553a642b7084dbc2bf2e0ec00551.jpg",
  atributos: {
    ataque: 85,
    defesa: 80,
    magia: 60,
    carisma: 0
  }
};

var cartaVerdeGales = {
  nome: "Dragão - Verde-Galês,",
  imagem:
    "https://i.pinimg.com/originals/77/ff/da/77ffdad1415a5319526d101e7e6014ed.jpg",
  atributos: {
    ataque: 70,
    defesa: 60,
    magia: 50,
    carisma: 0
  }
};

var cartaLobisomem = {
  nome: "Lobisomem",
  imagem:
    "https://i.pinimg.com/originals/0d/5b/f0/0d5bf02c9edd143654f701cb06f8d50d.jpg",
  atributos: {
    ataque: 60,
    defesa: 50,
    magia: 20,
    carisma: 0
  }
};

var cartaMaquina;
var cartaJogador;
var cartas = [
  cartaTronquilho,
  cartaFwooper,
  cartaGraphorn,
  cartaKappa,
  cartaMooncalf,
  cartaLethifold,
  cartaMurtlap,
  cartaPelucio,
  cartaNundu,
  cartaOccamy,
  cartaRunespoor,
  cartaRapinomonio,
  cartaSeminviso,
  cartaMandragora,
  cartaFenix,
  cartaBasilisco,
  cartaDiabretes,
  cartaNegroDasIlhasHebridas,
  cartaMeteoroChines,
  cartaRaboCorneo,
  cartaVerdeGales,
  cartaLobisomem
];

var pontosJogador = 0;
var pontosMaquina = 0;

atualizaPlacar();
atualizaQuantidadeDeCartas();

function atualizaQuantidadeDeCartas() {
  var divQuantidadeCartas = document.getElementById("quantidade-cartas");
  var html = "Quantidade de cartas no jogo: " + cartas.length;

  divQuantidadeCartas.innerHTML = html;
}

function atualizaPlacar() {
  var divPlacar = document.getElementById("placar");
  var html = "Jogador " + pontosJogador + "/" + pontosMaquina + " Máquina";

  divPlacar.innerHTML = html;
}

function sortearCarta() {
  var numeroCartaMaquina = parseInt(Math.random() * cartas.length);
  cartaMaquina = cartas[numeroCartaMaquina];
  cartas.splice(numeroCartaMaquina, 1);

  var numeroCartaJogador = parseInt(Math.random() * cartas.length);
  cartaJogador = cartas[numeroCartaJogador];
  cartas.splice(numeroCartaJogador, 1);

  document.getElementById("btnSortear").disabled = true;
  document.getElementById("btnJogar").disabled = false;

  exibeCartaJogador();
}

function exibeCartaJogador() {
  var divCartaJogador = document.getElementById("carta-jogador");
  var moldura =
    '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">';
  divCartaJogador.style.backgroundImage = `url(${cartaJogador.imagem})`;
  var nome = `<p class="carta-subtitle">${cartaJogador.nome}</p>`;
  var opcoesTexto = "";

  for (var atributo in cartaJogador.atributos) {
    opcoesTexto +=
      "<input type='radio' name='atributo' value='" +
      atributo +
      "'>" +
      atributo +
      " " +
      cartaJogador.atributos[atributo] +
      "<br>";
  }

  var html = "<div id='opcoes' class='carta-status'>";

  divCartaJogador.innerHTML = moldura + nome + html + opcoesTexto + "</div>";
}

function obtemAtributoSelecionado() {
  var radioAtributo = document.getElementsByName("atributo");
  for (var i = 0; i < radioAtributo.length; i++) {
    if (radioAtributo[i].checked) {
      return radioAtributo[i].value;
    }
  }
}

function jogar() {
  var divResultado = document.getElementById("resultado");
  var atributoSelecionado = obtemAtributoSelecionado();

  if (
    cartaJogador.atributos[atributoSelecionado] >
    cartaMaquina.atributos[atributoSelecionado]
  ) {
    htmlResultado = '<p class="resultado-final">Venceu</p>';
    pontosJogador++;
  } else if (
    cartaJogador.atributos[atributoSelecionado] <
    cartaMaquina.atributos[atributoSelecionado]
  ) {
    htmlResultado = '<p class="resultado-final">Perdeu</p>';
    pontosMaquina++;
  } else {
    htmlResultado = '<p class="resultado-final">Empatou</p>';
  }

  if (cartas.length == 0) {
    alert("Fim de jogo");
    if (pontosJogador > pontosMaquina) {
      htmlResultado = '<p class="resultado-final">Venceu</p>';
    } else if (pontosMaquina > pontosJogador) {
      htmlResultado = '<p class="resultado-final">Perdeu</p>';
    } else {
      htmlResultado = '<p class="resultado-final">Empatou</p>';
    }
  } else {
    document.getElementById("btnProximaRodada").disabled = false;
  }

  divResultado.innerHTML = htmlResultado;
  document.getElementById("btnJogar").disabled = true;

  atualizaPlacar();
  exibeCartaMaquina();
  atualizaQuantidadeDeCartas();
}

function exibeCartaMaquina() {
  var divCartaMaquina = document.getElementById("carta-maquina");
  var moldura =
    '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">';
  divCartaMaquina.style.backgroundImage = `url(${cartaMaquina.imagem})`;
  var nome = `<p class="carta-subtitle">${cartaMaquina.nome}</p>`;
  var opcoesTexto = "";

  for (var atributo in cartaMaquina.atributos) {
    console.log(atributo);
    opcoesTexto +=
      "<p type='text' name='atributo' value='" +
      atributo +
      "'>" +
      atributo +
      " " +
      cartaMaquina.atributos[atributo] +
      "<br>";
  }

  var html = "<div id='opcoes' class='carta-status --spacing'>";

  divCartaMaquina.innerHTML = moldura + nome + html + opcoesTexto + "</div>";
}

function proximaRodada() {
  var divCartas = document.getElementById("cartas");

  divCartas.innerHTML = `<div id="carta-jogador" class="carta"></div> <div id="carta-maquina" class="carta"></div>`;

  document.getElementById("btnSortear").disabled = false;
  document.getElementById("btnJogar").disabled = true;
  document.getElementById("btnProximaRodada").disabled = true;

  var divResultado = document.getElementById("resultado");
  divResultado.innerHTML = "";
}
